<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
      :root {
          --transition-duration: 0.4s;
          --border-radius: 12px;
          --shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      }

      * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
          font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      }

      body {
          display: flex;
          justify-content: center;
          align-items: center;
          min-height: 100vh;
          background-size: cover;
          background-position: center;
          background-attachment: fixed;
          transition: background-image 1.2s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .form-container {
          width: 380px;
          padding: 40px;
          border-radius: var(--border-radius);
          background: rgba(255, 255, 255, 0.88);
          backdrop-filter: blur(12px);
          -webkit-backdrop-filter: blur(12px);
          box-shadow: var(--shadow);
          transition: all var(--transition-duration) cubic-bezier(0.4, 0, 0.2, 1);
          overflow: hidden;
          position: relative;
          /* –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤—ã—Å–æ—Ç–∞ –¥–ª—è —Ñ–æ—Ä–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ */
          min-height: 420px;
      }

      .form-container::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          height: 6px;
          background: linear-gradient(90deg, #4361ee, #3a0ca3, #7209b7);
          z-index: 10;
      }

      .form-container::after {
          content: '';
          position: absolute;
          bottom: 0;
          left: 0;
          right: 0;
          height: 6px;
          background: linear-gradient(60deg, #4361ee, #3a0ca3, #7209b7);
          z-index: 10;
      }

      .form-title {
          text-align: center;
          margin-bottom: 24px;
          font-size: 28px;
          font-weight: 700;
          color: #1a1a1a;
          letter-spacing: -0.5px;
      }

      .input-group {
          margin-bottom: 16px;
          position: relative;
      }

      .input-group input {
          width: 100%;
          padding: 14px 18px;
          border: 1px solid rgba(0, 0, 0, 0.1);
          border-radius: var(--border-radius);
          background-color: rgba(255, 255, 255, 0.9);
          font-size: 15px;
          font-weight: 500;
          color: #333;
          transition: all 0.2s ease;
      }

      .input-group input:focus {
          outline: none;
          border-color: #4361ee;
          box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
      }

      .input-group input::placeholder {
          color: #888;
          font-weight: 400;
      }

      .input-group .error-message {
          display: none;
          color: #e63946;
          font-size: 13px;
          margin-top: 6px;
          font-weight: 500;
      }

      .input-group.error input {
          border-color: #e63946;
      }

      .input-group.error .error-message {
          display: block;
      }

      .btn {
          width: 100%;
          padding: 14px;
          border: none;
          border-radius: var(--border-radius);
          background: linear-gradient(135deg, #4361ee, #3a0ca3);
          color: white;
          font-size: 16px;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.2s ease;
          margin-top: 8px;
          margin-bottom: 16px;
      }

      .btn:hover {
          transform: translateY(-2px);
          box-shadow: 0 6px 12px rgba(67, 97, 238, 0.25);
      }

      .btn:active {
          transform: translateY(0);
      }

      .switch-form {
          text-align: center;
          font-size: 14px;
          color: #555;
          margin-top: 8px;
      }

      .switch-btn {
          background: none;
          border: none;
          color: #4361ee;
          text-decoration: none;
          cursor: pointer;
          font-size: 14px;
          font-weight: 600;
          padding: 0;
          margin-left: 4px;
          transition: all 0.2s ease;
      }

      .switch-btn:hover {
          color: #3a0ca3;
          text-decoration: underline;
      }

      .form-content {
          transition: opacity var(--transition-duration) ease;
          height: 100%;
      }

      /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ */
      .modal {
          position: fixed;
          top: 20px;
          left: 50%;
          transform: translateX(-50%);
          background: #4caf50;
          color: white;
          padding: 16px 24px;
          border-radius: var(--border-radius);
          box-shadow: var(--shadow);
          z-index: 1000;
          display: flex;
          align-items: center;
          opacity: 0;
          transition: opacity 0.3s ease;
          pointer-events: none;
      }

      .modal.show {
          opacity: 1;
      }

      .modal-icon {
          margin-right: 12px;
          font-size: 20px;
      }

      /* –ü–æ–≥–æ–¥–∞ */
      .weather-container {
          text-align: center;
          opacity: 0;
          transform: translateY(20px);
          transition: all 0.5s ease;
          position: absolute;
          top: 40px;
          left: 40px;
          right: 40px;
          bottom: 40px;
          display: flex;
          flex-direction: column;
          justify-content: center;
          z-index: -2;
      }

      .weather-container.show {
          opacity: 1;
          transform: translateY(0);
      }

      .weather-icon {
          width: 80px;
          height: 80px;
          margin: 0 auto 10px;
          background-size: contain;
          background-repeat: no-repeat;
          background-position: center;
      }

      .weather-temp {
          font-size: 42px;
          font-weight: 700;
          margin-bottom: 8px;
          color: #1a1a1a;
      }

      .weather-description {
          font-size: 16px;
          margin-bottom: 16px;
          color: #555;
          text-transform: capitalize;
      }

      .weather-details {
          display: flex;
          justify-content: center;
          gap: 20px;
          margin-top: 16px;
      }

      .weather-detail {
          display: flex;
          align-items: center;
          font-size: 14px;
          color: #555;
      }

      .weather-detail i {
          margin-right: 5px;
          font-size: 16px;
      }

      .welcome-message {
          text-align: center;
          margin-bottom: 20px;
          font-size: 18px;
          font-weight: 600;
          color: #1a1a1a;
      }

      .logout-btn {
          display: block;
          width: 120px;
          margin: 20px auto 0;
          padding: 8px 12px;
          border: none;
          border-radius: var(--border-radius);
          background: #f0f0f0;
          color: #555;
          font-size: 14px;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.2s ease;
      }

      .logout-btn:hover {
          background: #e0e0e0;
      }

      /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
      @keyframes fadeIn {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
      }

      .fade-in {
          animation: fadeIn 0.6s ease-out forwards;
      }

      /* –ù–æ—á–Ω–æ–π —Ä–µ–∂–∏–º */
      body.night .form-container {
          background: rgba(20, 20, 30, 0.88);
      }

      body.night .form-title,
      body.night .switch-form {
          color: #f0f0f0;
      }

      body.night .input-group input {
          background-color: rgba(30, 30, 40, 0.9);
          border-color: rgba(255, 255, 255, 0.1);
          color: #f0f0f0;
      }

      body.night .input-group input::placeholder {
          color: #aaa;
      }

      body.night .btn {
          background: linear-gradient(135deg, #7209b7, #560bad);
      }

      body.night .switch-btn {
          color: #f72585;
      }

      body.night .switch-btn:hover {
          color: #b5179e;
      }

      body.night .weather-temp,
      body.night .welcome-message {
          color: #f0f0f0;
      }

      body.night .weather-description,
      body.night .weather-detail {
          color: #ccc;
      }

      /* –£—Ç—Ä–µ–Ω–Ω–∏–π —Ä–µ–∂–∏–º */
      body.morning .form-container {
          background: rgba(255, 240, 230, 0.88);
      }

      body.morning .btn {
          background: linear-gradient(135deg, #f72585, #b5179e);
      }

      body.morning .switch-btn {
          color: #f72585;
      }

      /* –í–µ—á–µ—Ä–Ω–∏–π —Ä–µ–∂–∏–º */
      body.evening .form-container {
          background: rgba(50, 40, 70, 0.88);
      }

      body.evening .form-title,
      body.evening .switch-form {
          color: #f0f0f0;
      }

      body.evening .input-group input {
          background-color: rgba(60, 50, 80, 0.9);
          color: #f0f0f0;
      }
  </style>
</head>
<body>
  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —É—Å–ø–µ—à–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
  <div class="modal" id="successModal">
      <span class="modal-icon">‚úì</span>
      <span>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ!</span>
  </div>

  <!-- –û—Å–Ω–æ–≤–Ω–∞—è —Ñ–æ—Ä–º–∞ -->
  <div class="form-container" id="formContainer">
      <!-- –§–æ—Ä–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
      <div class="form-content fade-in" id="loginForm">
          <h2 class="form-title">–í–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç</h2>
          <form id="login">
              <div class="input-group">
                  <input type="email" id="loginEmail" placeholder="–í–∞—à email" required>
              </div>
              <div class="input-group">
                  <input type="password" id="loginPassword" placeholder="–ü–∞—Ä–æ–ª—å" required>
              </div>
              <button type="submit" class="btn">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
          </form>
          <div class="switch-form">
              –ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <button class="switch-btn" id="showRegister">–°–æ–∑–¥–∞—Ç—å</button>
          </div>
      </div>

      <!-- –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
      <div class="form-content" id="registerForm" style="display: none; opacity: 0;">
          <h2 class="form-title">–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç</h2>
          <form id="register">
              <div class="input-group">
                  <input type="text" id="registerFirstName" placeholder="–ò–º—è" required>
              </div>
              <div class="input-group">
                  <input type="text" id="registerLastName" placeholder="–§–∞–º–∏–ª–∏—è" required>
              </div>
              <div class="input-group" id="emailGroup">
                  <input type="email" id="registerEmail" placeholder="Email" required>
                  <div class="error-message" id="emailError">–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email</div>
              </div>
              <div class="input-group" id="passwordGroup">
                  <input type="password" id="registerPassword" placeholder="–ü–∞—Ä–æ–ª—å (–º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤)" required>
                  <div class="error-message" id="passwordError">–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤</div>
              </div>
              <div class="input-group" id="confirmPasswordGroup">
                  <input type="password" id="registerConfirmPassword" placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å" required>
                  <div class="error-message" id="confirmPasswordError">–ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç</div>
              </div>
              <button type="submit" class="btn">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
          </form>
          <div class="switch-form">
              –£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <button class="switch-btn" id="showLogin">–í–æ–π—Ç–∏</button>
          </div>
      </div>

      <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ø–æ–≥–æ–¥—ã (–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã—Ç) -->
      <div class="weather-container" id="weatherContainer">
          <div class="welcome-message" id="welcomeMessage"></div>
          <div class="weather-icon" id="weatherIcon"></div>
          <div class="weather-temp" id="weatherTemp"></div>
          <div class="weather-description" id="weatherDescription"></div>
          <div class="weather-details">
              <div class="weather-detail">
                  <i>üí®</i>
                  <span id="windSpeed"></span>
              </div>
              <div class="weather-detail">
                  <i>üíß</i>
                  <span id="humidity"></span>
              </div>
          </div>
          <button class="logout-btn" id="logoutBtn">–í—ã–π—Ç–∏</button>
      </div>
  </div>

  <script>
      // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
      const body = document.body;
      const formContainer = document.getElementById('formContainer');
      const loginForm = document.getElementById('loginForm');
      const registerForm = document.getElementById('registerForm');
      const showRegisterBtn = document.getElementById('showRegister');
      const showLoginBtn = document.getElementById('showLogin');
      const successModal = document.getElementById('successModal');
      const weatherContainer = document.getElementById('weatherContainer');
      const welcomeMessage = document.getElementById('welcomeMessage');
      const weatherIcon = document.getElementById('weatherIcon');
      const weatherTemp = document.getElementById('weatherTemp');
      const weatherDescription = document.getElementById('weatherDescription');
      const windSpeed = document.getElementById('windSpeed');
      const humidity = document.getElementById('humidity');
      const logoutBtn = document.getElementById('logoutBtn');
      
      // –≠–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
      const emailGroup = document.getElementById('emailGroup');
      const passwordGroup = document.getElementById('passwordGroup');
      const confirmPasswordGroup = document.getElementById('confirmPasswordGroup');
      const registerEmail = document.getElementById('registerEmail');
      const registerPassword = document.getElementById('registerPassword');
      const registerConfirmPassword = document.getElementById('registerConfirmPassword');
      
      // API –∫–ª—é—á –¥–ª—è OpenWeatherMap (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Å–≤–æ–π)
      const API_KEY = 'aaf8c7e1d6634d940e87a300f1376ff8'; // –≠—Ç–æ –ø—Ä–∏–º–µ—Ä, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–≤–æ–π –∫–ª—é—á
      const CITY = 'Moscow';
      
      // –¢–µ–∫—É—â–∏–π –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
      let currentUser = null;
      
      // –§–æ–Ω–æ–≤—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫
      const backgroundImages = {
          night: 'https://images.unsplash.com/photo-1534796636912-3b95b3ab5986?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80',
          morning: 'https://images.unsplash.com/photo-1498550744921-75f79806b8a7?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80',
          day: 'https://images.unsplash.com/photo-1506744038136-46273834b3fb?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80',
          evening: 'https://images.unsplash.com/photo-1500382017468-9049fed747ef?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80'
      };
      
      // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫
      function getTimeOfDay() {
          const hour = new Date().getHours();
          
          if (hour >= 5 && hour < 10) return 'morning';
          if (hour >= 10 && hour < 17) return 'day';
          if (hour >= 17 && hour < 21) return 'evening';
          return 'night';
      }
      
      // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ñ–æ–Ω–∞ –∏ —Ç–µ–º—ã
      function setBackgroundAndTheme() {
          const timeOfDay = getTimeOfDay();
          
          // –£–¥–∞–ª—è–µ–º –≤—Å–µ –∫–ª–∞—Å—Å—ã –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫
          body.classList.remove('night', 'morning', 'day', 'evening');
          
          // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–æ–≤—ã–π —Ñ–æ–Ω –∏ –∫–ª–∞—Å—Å
          body.style.backgroundImage = `url(${backgroundImages[timeOfDay]})`;
          body.classList.add(timeOfDay);
      }
      
      // –í–∞–ª–∏–¥–∞—Ü–∏—è email
      function validateEmail(email) {
          const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
          return re.test(email);
      }
      
      // –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–æ–ª—è
      function validatePassword(password) {
          return password.length >= 6;
      }
      
      // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π
      function validateConfirmPassword(password, confirmPassword) {
          return password === confirmPassword;
      }
      
      // –°–±—Ä–æ—Å –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
      function resetValidation() {
          emailGroup.classList.remove('error');
          passwordGroup.classList.remove('error');
          confirmPasswordGroup.classList.remove('error');
      }
      
      // –ü–æ–∫–∞–∑–∞—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
      function showSuccessModal() {
          successModal.classList.add('show');
          setTimeout(() => {
              successModal.classList.remove('show');
          }, 2000);
      }
      
      // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ LocalStorage
      function saveUserToLocalStorage(user) {
          let users = JSON.parse(localStorage.getItem('users')) || [];
          users.push(user);
          localStorage.setItem('users', JSON.stringify(users));
      }
      
      // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
      function checkUserExists(email) {
          const users = JSON.parse(localStorage.getItem('users')) || [];
          return users.some(user => user.email === email);
      }
      
      // –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
      function authenticateUser(email, password) {
          const users = JSON.parse(localStorage.getItem('users')) || [];
          return users.find(user => user.email === email && user.password === password);
      }
      
      // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–≥–æ–¥–µ
      async function fetchWeather() {
          try {
              const response = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${CITY}&units=metric&lang=ru&appid=${API_KEY}`);
              const data = await response.json();
              
              if (data.cod !== 200) {
                  throw new Error(data.message);
              }
              
              return data;
          } catch (error) {
              console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–≥–æ–¥–µ:', error);
              return null;
          }
      }
      
      // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–≥–æ–¥–µ
      async function showWeather(user) {
          const weatherData = await fetchWeather();
          
          if (!weatherData) {
              welcomeMessage.textContent = `–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ${user.firstName} ${user.lastName}! –ü–æ–≥–æ–¥–∞ –≤ –ú–æ—Å–∫–≤–µ:`;
              weatherContainer.innerHTML += '<p>–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–≥–æ–¥–µ</p>';
              return;
          }
          
          // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
          welcomeMessage.textContent = `–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ${user.firstName} ${user.lastName}! –ü–æ–≥–æ–¥–∞ –≤ –ú–æ—Å–∫–≤–µ:`;
          
          // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–∫–æ–Ω–∫–∏ –ø–æ–≥–æ–¥—ã
          const iconCode = weatherData.weather[0].icon;
          weatherIcon.style.backgroundImage = `url(https://openweathermap.org/img/wn/${iconCode}@2x.png)`;
          
          // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã
          const temp = Math.round(weatherData.main.temp);
          weatherTemp.textContent = `${temp}¬∞C`;
          
          // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–ø–∏—Å–∞–Ω–∏—è –ø–æ–≥–æ–¥—ã
          weatherDescription.textContent = weatherData.weather[0].description;
          
          // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏ –≤–µ—Ç—Ä–∞
          windSpeed.textContent = `${weatherData.wind.speed} –º/—Å`;
          
          // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤–ª–∞–∂–Ω–æ—Å—Ç–∏
          humidity.textContent = `${weatherData.main.humidity}%`;
      }
      
      // –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
      function showAuthorizedInterface(user) {
          // –°–∫—Ä—ã–≤–∞–µ–º —Ñ–æ—Ä–º—ã
          loginForm.style.display = 'none';
          registerForm.style.display = 'none';
          
          // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –ø–æ–≥–æ–¥–æ–π
          weatherContainer.classList.add('show');
          
          // –ó–∞–≥—Ä—É–∂–∞–µ–º –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–≥–æ–¥–µ
          showWeather(user);
      }
      
      // –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
      function logout() {
          currentUser = null;
          weatherContainer.classList.remove('show');
          showLogin();
      }
      
      // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Ñ–æ—Ä–º–∞–º–∏
      function showRegister() {
          resetValidation();
          loginForm.style.opacity = '0';
          setTimeout(() => {
              loginForm.style.display = 'none';
              registerForm.style.display = 'block';
              setTimeout(() => {
                  registerForm.style.opacity = '1';
                  registerForm.classList.add('fade-in');
                  // –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
                  formContainer.style.width = '420px';
              }, 10);
          }, 300);
      }
      
      function showLogin() {
          registerForm.style.opacity = '0';
          registerForm.classList.remove('fade-in');
          setTimeout(() => {
              registerForm.style.display = 'none';
              loginForm.style.display = 'block';
              setTimeout(() => {
                  loginForm.style.opacity = '1';
                  loginForm.classList.add('fade-in');
                  // –í–æ–∑–≤—Ä–∞—Ç –∫ –∏—Å—Ö–æ–¥–Ω–æ–º—É —Ä–∞–∑–º–µ—Ä—É
                  formContainer.style.width = '380px';
              }, 10);
          }, 300);
      }
      
      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
      showRegisterBtn.addEventListener('click', showRegister);
      showLoginBtn.addEventListener('click', showLogin);
      logoutBtn.addEventListener('click', logout);
      
      // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
      document.getElementById('login').addEventListener('submit', function(e) {
          e.preventDefault();
          const email = document.getElementById('loginEmail').value;
          const password = document.getElementById('loginPassword').value;
          
          const user = authenticateUser(email, password);
          
          if (user) {
              currentUser = user;
              showAuthorizedInterface(user);
          } else {
              alert('–ù–µ–≤–µ—Ä–Ω—ã–π email –∏–ª–∏ –ø–∞—Ä–æ–ª—å');
          }
      });
      
      // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
      document.getElementById('register').addEventListener('submit', function(e) {
          e.preventDefault();
          resetValidation();
          
          const firstName = document.getElementById('registerFirstName').value;
          const lastName = document.getElementById('registerLastName').value;
          const email = registerEmail.value;
          const password = registerPassword.value;
          const confirmPassword = registerConfirmPassword.value;
          
          let isValid = true;
          
          // –í–∞–ª–∏–¥–∞—Ü–∏—è email
          if (!validateEmail(email)) {
              emailGroup.classList.add('error');
              isValid = false;
          }
          
          // –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–æ–ª—è
          if (!validatePassword(password)) {
              passwordGroup.classList.add('error');
              isValid = false;
          }
          
          // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π
          if (!validateConfirmPassword(password, confirmPassword)) {
              confirmPasswordGroup.classList.add('error');
              isValid = false;
          }
          
          // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
          if (checkUserExists(email)) {
              emailGroup.classList.add('error');
              document.getElementById('emailError').textContent = '–≠—Ç–æ—Ç email —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω';
              isValid = false;
          }
          
          if (isValid) {
              // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
              const user = {
                  firstName,
                  lastName,
                  email,
                  password // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –ø–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ö–µ—à–∏—Ä–æ–≤–∞–Ω!
              };
              
              saveUserToLocalStorage(user);
              
              // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
              showSuccessModal();
              
              // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º –Ω–∞ —Ñ–æ—Ä–º—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
              setTimeout(() => {
                  showLogin();
                  // –ó–∞–ø–æ–ª–Ω—è–µ–º email –≤ —Ñ–æ—Ä–º–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
                  document.getElementById('loginEmail').value = email;
                  document.getElementById('loginPassword').focus();
              }, 500);
          }
      });
      
      // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è live-–≤–∞–ª–∏–¥–∞—Ü–∏–∏
      registerEmail.addEventListener('input', () => {
          if (validateEmail(registerEmail.value)) {
              emailGroup.classList.remove('error');
          }
      });
      
      registerPassword.addEventListener('input', () => {
          if (validatePassword(registerPassword.value)) {
              passwordGroup.classList.remove('error');
          }
      });
      
      registerConfirmPassword.addEventListener('input', () => {
          if (validateConfirmPassword(registerPassword.value, registerConfirmPassword.value)) {
              confirmPasswordGroup.classList.remove('error');
          }
      });
      
      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
      setBackgroundAndTheme();
      
      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–æ–Ω–∞ –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
      setInterval(setBackgroundAndTheme, 60000);
  </script>
</body>
</html>